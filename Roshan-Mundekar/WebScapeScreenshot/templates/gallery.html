<!DOCTYPE html>
<html lang="en">

<head>
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
	<meta charset="utf-8" />
	<title>ALGORISIS TECHNOLOGIES</title>

	<meta name="description" content="with selectable elements and custom icons" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0" />

	<!-- bootstrap & fontawesome -->
	<link rel="stylesheet" href="../static/assets/css/bootstrap.min.css" />
	<link rel="stylesheet" href="../static/assets/font-awesome/4.5.0/css/font-awesome.min.css" />

	<!-- page specific plugin styles -->

	<!-- text fonts -->
	<link rel="stylesheet" href="../static/assets/css/fonts.googleapis.com.css" />

	<!-- ace styles -->
	<link rel="stylesheet" href="../static/assets/css/ace.min.css" class="ace-main-stylesheet" id="main-ace-style" />

	<!--[if lte IE 9]>
			<link rel="stylesheet" href="assets/css/ace-part2.min.css" class="ace-main-stylesheet" />
		<![endif]-->
	<link rel="stylesheet" href="../static/assets/css/ace-skins.min.css" />
	<link rel="stylesheet" href="../static/assets/css/ace-rtl.min.css" />
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css">
	<!--[if lte IE 9]>
		  <link rel="stylesheet" href="assets/css/ace-ie.min.css" />
		<![endif]-->

	<!-- inline styles related to this page -->

	<!-- ace settings handler -->
	<script src="../static/assets/js/ace-extra.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

	<!-- HTML5shiv and Respond.js for IE8 to support HTML5 elements and media queries -->


</head>

<body class="no-skin">
	<div id="navbar" class="navbar navbar-default ace-save-state">
		<div class="navbar-container ace-save-state" id="navbar-container">
			<button type="button" class="navbar-toggle menu-toggler pull-left" id="menu-toggler" data-target="#sidebar">
				<span class="sr-only">Toggle sidebar</span>

				<span class="icon-bar"></span>

				<span class="icon-bar"></span>

				<span class="icon-bar"></span>
			</button>

			<div class="navbar-header pull-left">
				<a href="/" class="navbar-brand">
					<small>
						<i class="fa fa-leaf"></i>
						ALGORISIS TECHNOLOGIES
					</small>
				</a>
			</div>


		</div><!-- /.navbar-container -->
	</div>

	<div class="main-container ace-save-state" id="main-container">
		<script type="text/javascript">
			try { ace.settings.loadState('main-container') } catch (e) { }
		</script>

		<div id="sidebar" class="sidebar responsive ace-save-state">
			<script type="text/javascript">
				try { ace.settings.loadState('sidebar') } catch (e) { }
			</script>



			<ul class="nav nav-list">
				<li class="">
					<a href="/">
						<i class="menu-icon fa fa-tachometer"></i>
						<span class="menu-text"> Dashboard </span>
					</a>

					<b class="arrow"></b>
				</li>

				<li class="active open ">
					<a href="#" class="dropdown-toggle">
						<i class="menu-icon fa fa-desktop"></i>
						<span class="menu-text">
							WEBSCRAB &amp; Images
						</span>

						<b class="arrow fa fa-angle-down"></b>
					</a>

					<b class="arrow"></b>

					<ul class="submenu">
						<li class="">
							<a href="#" class="dropdown-toggle">
								<i class="menu-icon fa fa-caret-right"></i>

								Domains Names
								<b class="arrow fa fa-angle-down"></b>
							</a>

							<b class="arrow"></b>

							<ul class="submenu">
								{% for image in image_files %}
								<li class="">
									<a href="#">
										<i class="menu-icon fa fa-caret-right"></i>
										{{ image }}
									</a>
								</li>
								{% endfor %}

							</ul>
						</li>


					</ul>
				</li>


			</ul><!-- /.nav-list -->

			<div class="sidebar-toggle sidebar-collapse" id="sidebar-collapse">
				<i id="sidebar-toggle-icon" class="ace-icon fa fa-angle-double-left ace-save-state"
					data-icon1="ace-icon fa fa-angle-double-left" data-icon2="ace-icon fa fa-angle-double-right"></i>
			</div>
		</div>

		<div class="main-content">
			<div class="main-content-inner">


				<div class="row">
					<div class="col-xs-12">
						<div>
							<ul class="ace-thumbnails clearfix">
								{% if image_files %}
								{% for image in image_files %}
								<li>
									<a href="{{ url_for('static', filename='hostname/' + folder_name + '/' + image) }}"
										data-rel="colorbox">
										<img width="150" height="150" alt="150x150"
											src="{{ url_for('static', filename='hostname/' + folder_name + '/' + image) }}" />
										<div class="text">
											<div class="inner">Sample Caption on Hover</div>
										</div>
									</a>
									<button class="btn btn-primary ocr-button"
										data-image="{{ url_for('static', filename='hostname/' + folder_name + '/' + image) }}">
										Apply OCR
									</button>
								</li>
								{% endfor %}
								{% else %}
								<li>No images found in this folder.</li>
								{% endif %}
							</ul>
						</div><!-- PAGE CONTENT ENDS -->
					</div><!-- /.col -->
				</div><!-- /.row -->

			</div><!-- /.page-content -->
		</div>
	</div><!-- /.main-content -->

	<script>
		document.querySelectorAll('.ocr-button').forEach(button => {
			button.addEventListener('click', async (e) => {
				e.preventDefault();
				const imagePath = button.dataset.image;
	
				// Show loading spinner
				Swal.fire({
					title: 'Processing...',
					text: 'Please wait while OCR is being applied.',
					icon: 'info',
					allowOutsideClick: false,
					showConfirmButton: false,
					willOpen: () => {
						Swal.showLoading();
					}
				});
	
				try {
					// Send the image path to the backend
					const response = await fetch('/apply_ocr', {
						method: 'POST',
						headers: {
							'Content-Type': 'application/json'
						},
						body: JSON.stringify({ image: imagePath })
					});
	
					if (!response.ok) throw new Error('Failed to process the image.');
	
					const data = await response.json();
	
					// Close the loading modal
					Swal.close();
	
					// Show the success modal with the download button
					Swal.fire({
						title: 'OCR Complete!',
						html: `<p>Your text file is ready. Click the button below to download it.</p>
							   <a href="${data.download_url}" class="btn btn-success" download>Download Text File</a>`,
						icon: 'success',
						showConfirmButton: false
					});
	
					// Optionally, add the download button to the `<li>`
					const downloadButton = document.createElement('a');
					downloadButton.href = data.download_url;
					downloadButton.classList.add('btn', 'btn-success');
					downloadButton.innerText = 'Download';
					downloadButton.download = true;
					button.parentElement.appendChild(downloadButton);
				} catch (error) {
					// Handle errors
					Swal.fire({
						title: 'Error!',
						text: error.message,
						icon: 'error',
						confirmButtonText: 'OK'
					});
				}
			});
		});
	</script>

	</div>
	</div>
	<div class="footer">
		<div class="footer-inner">
			<div class="footer-content">
				<span class="bigger-120">
					<span class="blue bolder">ALGORISIS TECHNOLOGIES</span>
					Application &copy; 2024-2025
				</span>

				&nbsp; &nbsp;
				<span class="action-buttons">
					<a href="#">
						<i class="ace-icon fa fa-twitter-square light-blue bigger-150"></i>
					</a>

					<a href="#">
						<i class="ace-icon fa fa-facebook-square text-primary bigger-150"></i>
					</a>

					<a href="#">
						<i class="ace-icon fa fa-rss-square orange bigger-150"></i>
					</a>
				</span>
			</div>
		</div>
	</div>

	<a href="#" id="btn-scroll-up" class="btn-scroll-up btn btn-sm btn-inverse">
		<i class="ace-icon fa fa-angle-double-up icon-only bigger-110"></i>
	</a>
	</div><!-- /.main-container -->

	<!-- basic scripts -->

	<!-- SweetAlert2 JS -->
	<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

	<script>
		// Select the form
		const form = document.getElementById('urlForm');

		// Add a submit event listener
		form.addEventListener('submit', function (e) {
			// Prevent the default form submission
			e.preventDefault();

			// Show the Swal loader
			Swal.fire({
				title: 'Processing...',
				text: 'Please wait while we process your request.',
				allowOutsideClick: false,
				didOpen: () => {
					Swal.showLoading();
				},
			});

			// Submit the form via AJAX (optional) or regular form submission
			const formData = new FormData(form);

			fetch(form.action, {
				method: form.method,
				body: formData,
			})
				.then((response) => response.json())
				.then((data) => {
					if (data.error) {
						// Handle error response
						Swal.fire({
							icon: 'error',
							title: 'Error!',
							text: data.error,
						});
					} else {
						// Handle success response
						Swal.fire({
							icon: 'success',
							title: 'Success!',
							text: 'Your URL has been processed successfully.',
						});
					}
				})
				.catch((error) => {
					// Handle fetch or server error
					Swal.fire({
						icon: 'error',
						title: 'Error!',
						text: 'An unexpected error occurred.',
					});
				});
		});
	</script>



	<!--[if !IE]> -->
	<script src="../static/assets/js/jquery-2.1.4.min.js"></script>

	<!-- <![endif]-->

	<!--[if IE]>
<script src="assets/js/jquery-1.11.3.min.js"></script>
<![endif]-->
	<script type="text/javascript">
		if ('ontouchstart' in document.documentElement) document.write("<script src='../static/assets/js/jquery.mobile.custom.min.js'>" + "<" + "/script>");
	</script>
	<script src="../static/assets/js/bootstrap.min.js"></script>

	<!-- page specific plugin scripts -->
	<script src="../static/assets/js/tree.min.js"></script>

	<!-- ace scripts -->
	<script src="../static/assets/js/ace-elements.min.js"></script>
	<script src="../static/assets/js/ace.min.js"></script>

	<!-- inline scripts related to this page -->
	<script type="text/javascript">
		jQuery(function ($) {
			var sampleData = initiateDemoData();//see below


			$('#tree1').ace_tree({
				dataSource: sampleData['dataSource1'],
				multiSelect: true,
				cacheItems: true,
				'open-icon': 'ace-icon tree-minus',
				'close-icon': 'ace-icon tree-plus',
				'itemSelect': true,
				'folderSelect': false,
				'selected-icon': 'ace-icon fa fa-check',
				'unselected-icon': 'ace-icon fa fa-times',
				loadingHTML: '<div class="tree-loading"><i class="ace-icon fa fa-refresh fa-spin blue"></i></div>'
			});

			$('#tree2').ace_tree({
				dataSource: sampleData['dataSource2'],
				loadingHTML: '<div class="tree-loading"><i class="ace-icon fa fa-refresh fa-spin blue"></i></div>',
				'open-icon': 'ace-icon fa fa-folder-open',
				'close-icon': 'ace-icon fa fa-folder',
				'itemSelect': true,
				'folderSelect': true,
				'multiSelect': true,
				'selected-icon': null,
				'unselected-icon': null,
				'folder-open-icon': 'ace-icon tree-plus',
				'folder-close-icon': 'ace-icon tree-minus'
			});





			function initiateDemoData() {
				var tree_data = {
					'for-sale': { text: 'For Sale', type: 'folder' },
					'vehicles': { text: 'Vehicles', type: 'folder' },
					'rentals': { text: 'Rentals', type: 'folder' },
					'real-estate': { text: 'Real Estate', type: 'folder' },
					'pets': { text: 'Pets', type: 'folder' },
					'tickets': { text: 'Tickets', type: 'item' },
					'services': { text: 'Services', type: 'item' },
					'personals': { text: 'Personals', type: 'item' }
				}
				tree_data['for-sale']['additionalParameters'] = {
					'children': {
						'appliances': { text: 'Appliances', type: 'item' },
						'arts-crafts': { text: 'Arts & Crafts', type: 'item' },
						'clothing': { text: 'Clothing', type: 'item' },
						'computers': { text: 'Computers', type: 'item' },
						'jewelry': { text: 'Jewelry', type: 'item' },
						'office-business': { text: 'Office & Business', type: 'item' },
						'sports-fitness': { text: 'Sports & Fitness', type: 'item' }
					}
				}
				tree_data['vehicles']['additionalParameters'] = {
					'children': {
						'cars': { text: 'Cars', type: 'folder' },
						'motorcycles': { text: 'Motorcycles', type: 'item' },
						'boats': { text: 'Boats', type: 'item' }
					}
				}
				tree_data['vehicles']['additionalParameters']['children']['cars']['additionalParameters'] = {
					'children': {
						'classics': { text: 'Classics', type: 'item' },
						'convertibles': { text: 'Convertibles', type: 'item' },
						'coupes': { text: 'Coupes', type: 'item' },
						'hatchbacks': { text: 'Hatchbacks', type: 'item' },
						'hybrids': { text: 'Hybrids', type: 'item' },
						'suvs': { text: 'SUVs', type: 'item' },
						'sedans': { text: 'Sedans', type: 'item' },
						'trucks': { text: 'Trucks', type: 'item' }
					}
				}

				tree_data['rentals']['additionalParameters'] = {
					'children': {
						'apartments-rentals': { text: 'Apartments', type: 'item' },
						'office-space-rentals': { text: 'Office Space', type: 'item' },
						'vacation-rentals': { text: 'Vacation Rentals', type: 'item' }
					}
				}
				tree_data['real-estate']['additionalParameters'] = {
					'children': {
						'apartments': { text: 'Apartments', type: 'item' },
						'villas': { text: 'Villas', type: 'item' },
						'plots': { text: 'Plots', type: 'item' }
					}
				}
				tree_data['pets']['additionalParameters'] = {
					'children': {
						'cats': { text: 'Cats', type: 'item' },
						'dogs': { text: 'Dogs', type: 'item' },
						'horses': { text: 'Horses', type: 'item' },
						'reptiles': { text: 'Reptiles', type: 'item' }
					}
				}

				var dataSource1 = function (options, callback) {
					var $data = null
					if (!("text" in options) && !("type" in options)) {
						$data = tree_data;//the root tree
						callback({ data: $data });
						return;
					}
					else if ("type" in options && options.type == "folder") {
						if ("additionalParameters" in options && "children" in options.additionalParameters)
							$data = options.additionalParameters.children || {};
						else $data = {}//no data
					}

					if ($data != null)//this setTimeout is only for mimicking some random delay
						setTimeout(function () { callback({ data: $data }); }, parseInt(Math.random() * 500) + 200);


				}




				var tree_data_2 = {
					'pictures': { text: 'Pictures', type: 'folder', 'icon-class': 'red' },


				}


				tree_data_2['pictures']['additionalParameters'] = {
					'children': {
						'wallpapers': { text: 'Wallpapers', type: 'folder', 'icon-class': 'pink' },
						'camera': { text: 'Camera', type: 'folder', 'icon-class': 'pink' }
					}
				}
				tree_data_2['pictures']['additionalParameters']['children']['wallpapers']['additionalParameters'] = {
					'children': [
						{ text: '<i class="ace-icon fa fa-picture-o green"></i> wallpaper1.jpg', type: 'item' },
						{ text: '<i class="ace-icon fa fa-picture-o green"></i> wallpaper2.jpg', type: 'item' },
						{ text: '<i class="ace-icon fa fa-picture-o green"></i> wallpaper3.jpg', type: 'item' },
						{ text: '<i class="ace-icon fa fa-picture-o green"></i> wallpaper4.jpg', type: 'item' }
					]
				}
				tree_data_2['pictures']['additionalParameters']['children']['camera']['additionalParameters'] = {
					'children': [
						{ text: '<i class="ace-icon fa fa-picture-o green"></i> photo1.jpg', type: 'item' },
						{ text: '<i class="ace-icon fa fa-picture-o green"></i> photo2.jpg', type: 'item' },
						{ text: '<i class="ace-icon fa fa-picture-o green"></i> photo3.jpg', type: 'item' },
						{ text: '<i class="ace-icon fa fa-picture-o green"></i> photo4.jpg', type: 'item' },
						{ text: '<i class="ace-icon fa fa-picture-o green"></i> photo5.jpg', type: 'item' },
						{ text: '<i class="ace-icon fa fa-picture-o green"></i> photo6.jpg', type: 'item' }
					]
				}





				var dataSource2 = function (options, callback) {
					var $data = null
					if (!("text" in options) && !("type" in options)) {
						$data = tree_data_2;//the root tree
						callback({ data: $data });
						return;
					}
					else if ("type" in options && options.type == "folder") {
						if ("additionalParameters" in options && "children" in options.additionalParameters)
							$data = options.additionalParameters.children || {};
						else $data = {}//no data
					}

					if ($data != null)//this setTimeout is only for mimicking some random delay
						setTimeout(function () { callback({ data: $data }); }, parseInt(Math.random() * 500) + 200);

					//we have used static data here
					//but you can retrieve your data dynamically from a server using ajax call
					//checkout examples/treeview.html and examples/treeview.js for more info
				}


				return { 'dataSource1': dataSource1, 'dataSource2': dataSource2 }
			}

		});
	</script>


</body>

</html>